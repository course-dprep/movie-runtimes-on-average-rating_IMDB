---
title: "Data exploration"
output: html_document
date: "2023-09-17"
---
In this document, we will explore the data of two IMDB datasets, to answer our research question: 'Does the run time of movies influence the average rating of that movie?'

```{r importing_data, eval=TRUE, echo=FALSE, warning=FALSE, message=FALSE}
# load the two separate datasets
library(tidyverse)
library(dplyr)

title_basics <- read_tsv("../../data/dataset/title_basics.tsv")
title_ratings <- read_tsv("../../data/dataset/title_ratings.tsv")

```

## Summary of relevant variables
We are going to be looking at three different variables:

- **runtimeMinutes** from the title_basics dataset

- **titleType** from the title_basics dataset, as we will specificially look at movies later on. 

- **averageRating** from the title_ratings dataset. 

Next to that, we will some extra variables, that might be used as covariates in our analysis. 

- **numVotes** from the title_ratings dataset
- **startYear** from the title_basics dataset 


### titleType

First of all, the different types of titles are explored. This variable refers to the type/format of the title (e.g. movie, short, tvseries, tvepisode, video etc). 

```{r Summary statistics for titletype, include = TRUE}

summary(title_basics$titleType)
head(title_basics$titleType)
tail(title_basics$titleType)
table(title_basics$titleType)

```
As can be read from the output, there are 11 different types of titles. For the type 'movie', there are 658476 observations.

### RuntimeMinutes 

Second of all, the run time is explored. As the name suggests, this variable refers to the primary run time of the title, in minutes.

```{r Summary statistics for RuntimeMinutes, include = TRUE}

summary(title_basics$runtimeMinutes)
head(title_basics$runtimeMinutes)
tail(title_basics$runtimeMinutes)
min(title_basics$runtimeMinutes)
max(title_basics$runtimeMinutes)

title_basics %>%
  group_by(runtimeMinutes) %>%
  count("\\N")

```
The min and max function show that there needs to be some data cleaning done.The output returns 'character' as the data type of 'runtimeMinutes', while numeric makes more sense. The max value that is returned is 'Talk-show', which clearly is not possible. Next to that, there seem to be quite some values missing for the running time. The last page of the tibble shows that there are 7144426 missing values. 

### Average Rating 

Next, the variable 'averageRating' is explored, which can be found in the 'title_ratings' dataset. The average rating is the weighted average of all individual user ratings. 

```{r Summary statistics for AverageRating, include = TRUE}

summary(title_ratings$averageRating)
head(title_ratings$averageRating)
tail(title_ratings$averageRating)
mean(title_ratings$averageRating)
table(title_ratings$averageRating)
```
Looking at the output, the range for 'averageRating' is 1-10.There seem to be no missing values. 

### numVotes 
We will explore the number of votes per title type as well, as this is highly related to the average rating that is given. 

```{r Summary statistics for NumVotes, include = TRUE}
summary(title_ratings$numVotes)
head(title_ratings$numVotes)
tail(title_ratings$numVotes)
```
As can be seen in the output, there is quite some fluctuation in the amount of reviews that a title gets. This is relevant information to take into account, as it will directly influence the reliability of the average rating. 

### startYear 
The start year represents the year in which the title was first released. 
```{r Summary statistics for startYear, include = TRUE}
summary(title_basics$startYear)
min(title_basics$startYear)
max(title_basics$startYear)
unique(title_basics$startYear)
```
The output shows that the titles fall in the range of 1874-2031. This means that the data set also contains titles of movies that have not been released, or that there needs to be some data cleaning done. 

## Generating plots
To improve our understanding of the relevant variables, they are visualized using varying plots below. From the boxplots, we can identify any outliers that need to be addressed during the data cleaning process. 
```{r plots, echo=FALSE, message=FALSE, eval=FALSE}
boxplot(title_basics$runtimeMinutes)
boxplot(title_ratings$averageRating)
boxplot(title_ratings$numVotes)
plot(title_ratings$averageRating, title_ratings$numVotes)
plot(title_basics$genres, title_basics$runtimeMinutes)

```
